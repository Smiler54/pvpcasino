/* Exciting slower coin flip animation with clear visibility of both sides */
@keyframes coin-flip-contained {
  0% {
    transform: rotateY(0deg) scale(1);
    filter: brightness(1) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
  5% {
    transform: rotateY(45deg) scale(1.02);
    filter: brightness(1.1) drop-shadow(0 6px 16px rgba(255, 215, 0, 0.5));
  }
  10% {
    transform: rotateY(90deg) scale(1.05);
    filter: brightness(1.2) drop-shadow(0 8px 20px rgba(255, 215, 0, 0.6));
  }
  15% {
    transform: rotateY(135deg) scale(1.08);
    filter: brightness(1.3) drop-shadow(0 10px 24px rgba(255, 215, 0, 0.65));
  }
  20% {
    transform: rotateY(180deg) scale(1.1);
    filter: brightness(1.4) drop-shadow(0 12px 28px rgba(255, 215, 0, 0.7));
  }
  25% {
    transform: rotateY(225deg) scale(1.12);
    filter: brightness(1.5) drop-shadow(0 14px 30px rgba(255, 215, 0, 0.75));
  }
  30% {
    transform: rotateY(270deg) scale(1.15);
    filter: brightness(1.6) drop-shadow(0 16px 32px rgba(255, 215, 0, 0.8));
  }
  35% {
    transform: rotateY(315deg) scale(1.17);
    filter: brightness(1.7) drop-shadow(0 18px 34px rgba(255, 215, 0, 0.82));
  }
  40% {
    transform: rotateY(360deg) scale(1.2);
    filter: brightness(1.8) drop-shadow(0 20px 36px rgba(255, 215, 0, 0.85));
  }
  45% {
    transform: rotateY(405deg) scale(1.17);
    filter: brightness(1.7) drop-shadow(0 18px 34px rgba(255, 215, 0, 0.82));
  }
  50% {
    transform: rotateY(450deg) scale(1.15);
    filter: brightness(1.6) drop-shadow(0 16px 32px rgba(255, 215, 0, 0.8));
  }
  55% {
    transform: rotateY(495deg) scale(1.12);
    filter: brightness(1.5) drop-shadow(0 14px 30px rgba(255, 215, 0, 0.75));
  }
  60% {
    transform: rotateY(540deg) scale(1.1);
    filter: brightness(1.4) drop-shadow(0 12px 28px rgba(255, 215, 0, 0.7));
  }
  65% {
    transform: rotateY(585deg) scale(1.08);
    filter: brightness(1.3) drop-shadow(0 10px 24px rgba(255, 215, 0, 0.65));
  }
  70% {
    transform: rotateY(630deg) scale(1.05);
    filter: brightness(1.2) drop-shadow(0 8px 20px rgba(255, 215, 0, 0.6));
  }
  75% {
    transform: rotateY(675deg) scale(1.03);
    filter: brightness(1.15) drop-shadow(0 6px 16px rgba(255, 215, 0, 0.5));
  }
  80% {
    transform: rotateY(720deg) scale(1.02);
    filter: brightness(1.1) drop-shadow(0 5px 14px rgba(255, 215, 0, 0.45));
  }
  85% {
    transform: rotateY(765deg) scale(1.01);
    filter: brightness(1.05) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
  90% {
    transform: rotateY(810deg) scale(1.005);
    filter: brightness(1.02) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
  95% {
    transform: rotateY(855deg) scale(1.002);
    filter: brightness(1.01) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
  100% {
    transform: rotateY(900deg) scale(1);
    filter: brightness(1) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
}

/* Exciting slower coin flip animation for heads result */
@keyframes coin-flip-contained-heads {
  0% {
    transform: rotateY(0deg) scale(1);
    filter: brightness(1) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
  5% {
    transform: rotateY(45deg) scale(1.02);
    filter: brightness(1.1) drop-shadow(0 6px 16px rgba(255, 215, 0, 0.5));
  }
  10% {
    transform: rotateY(90deg) scale(1.05);
    filter: brightness(1.2) drop-shadow(0 8px 20px rgba(255, 215, 0, 0.6));
  }
  15% {
    transform: rotateY(135deg) scale(1.08);
    filter: brightness(1.3) drop-shadow(0 10px 24px rgba(255, 215, 0, 0.65));
  }
  20% {
    transform: rotateY(180deg) scale(1.1);
    filter: brightness(1.4) drop-shadow(0 12px 28px rgba(255, 215, 0, 0.7));
  }
  25% {
    transform: rotateY(225deg) scale(1.12);
    filter: brightness(1.5) drop-shadow(0 14px 30px rgba(255, 215, 0, 0.75));
  }
  30% {
    transform: rotateY(270deg) scale(1.15);
    filter: brightness(1.6) drop-shadow(0 16px 32px rgba(255, 215, 0, 0.8));
  }
  35% {
    transform: rotateY(315deg) scale(1.17);
    filter: brightness(1.7) drop-shadow(0 18px 34px rgba(255, 215, 0, 0.82));
  }
  40% {
    transform: rotateY(360deg) scale(1.2);
    filter: brightness(1.8) drop-shadow(0 20px 36px rgba(255, 215, 0, 0.85));
  }
  45% {
    transform: rotateY(405deg) scale(1.17);
    filter: brightness(1.7) drop-shadow(0 18px 34px rgba(255, 215, 0, 0.82));
  }
  50% {
    transform: rotateY(450deg) scale(1.15);
    filter: brightness(1.6) drop-shadow(0 16px 32px rgba(255, 215, 0, 0.8));
  }
  55% {
    transform: rotateY(495deg) scale(1.12);
    filter: brightness(1.5) drop-shadow(0 14px 30px rgba(255, 215, 0, 0.75));
  }
  60% {
    transform: rotateY(540deg) scale(1.1);
    filter: brightness(1.4) drop-shadow(0 12px 28px rgba(255, 215, 0, 0.7));
  }
  65% {
    transform: rotateY(585deg) scale(1.08);
    filter: brightness(1.3) drop-shadow(0 10px 24px rgba(255, 215, 0, 0.65));
  }
  70% {
    transform: rotateY(630deg) scale(1.05);
    filter: brightness(1.2) drop-shadow(0 8px 20px rgba(255, 215, 0, 0.6));
  }
  75% {
    transform: rotateY(675deg) scale(1.03);
    filter: brightness(1.15) drop-shadow(0 6px 16px rgba(255, 215, 0, 0.5));
  }
  80% {
    transform: rotateY(720deg) scale(1.02);
    filter: brightness(1.1) drop-shadow(0 5px 14px rgba(255, 215, 0, 0.45));
  }
  85% {
    transform: rotateY(765deg) scale(1.01);
    filter: brightness(1.05) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
  90% {
    transform: rotateY(810deg) scale(1.005);
    filter: brightness(1.02) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
  95% {
    transform: rotateY(855deg) scale(1.002);
    filter: brightness(1.01) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
  100% {
    transform: rotateY(900deg) scale(1);
    filter: brightness(1) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
}

/* Exciting slower coin flip animation for tails result (extra rotation for tails) */
@keyframes coin-flip-contained-tails {
  0% {
    transform: rotateY(0deg) scale(1);
    filter: brightness(1) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
  5% {
    transform: rotateY(45deg) scale(1.02);
    filter: brightness(1.1) drop-shadow(0 6px 16px rgba(255, 215, 0, 0.5));
  }
  10% {
    transform: rotateY(90deg) scale(1.05);
    filter: brightness(1.2) drop-shadow(0 8px 20px rgba(255, 215, 0, 0.6));
  }
  15% {
    transform: rotateY(135deg) scale(1.08);
    filter: brightness(1.3) drop-shadow(0 10px 24px rgba(255, 215, 0, 0.65));
  }
  20% {
    transform: rotateY(180deg) scale(1.1);
    filter: brightness(1.4) drop-shadow(0 12px 28px rgba(255, 215, 0, 0.7));
  }
  25% {
    transform: rotateY(225deg) scale(1.12);
    filter: brightness(1.5) drop-shadow(0 14px 30px rgba(255, 215, 0, 0.75));
  }
  30% {
    transform: rotateY(270deg) scale(1.15);
    filter: brightness(1.6) drop-shadow(0 16px 32px rgba(255, 215, 0, 0.8));
  }
  35% {
    transform: rotateY(315deg) scale(1.17);
    filter: brightness(1.7) drop-shadow(0 18px 34px rgba(255, 215, 0, 0.82));
  }
  40% {
    transform: rotateY(360deg) scale(1.2);
    filter: brightness(1.8) drop-shadow(0 20px 36px rgba(255, 215, 0, 0.85));
  }
  45% {
    transform: rotateY(405deg) scale(1.17);
    filter: brightness(1.7) drop-shadow(0 18px 34px rgba(255, 215, 0, 0.82));
  }
  50% {
    transform: rotateY(450deg) scale(1.15);
    filter: brightness(1.6) drop-shadow(0 16px 32px rgba(255, 215, 0, 0.8));
  }
  55% {
    transform: rotateY(495deg) scale(1.12);
    filter: brightness(1.5) drop-shadow(0 14px 30px rgba(255, 215, 0, 0.75));
  }
  60% {
    transform: rotateY(540deg) scale(1.1);
    filter: brightness(1.4) drop-shadow(0 12px 28px rgba(255, 215, 0, 0.7));
  }
  65% {
    transform: rotateY(585deg) scale(1.08);
    filter: brightness(1.3) drop-shadow(0 10px 24px rgba(255, 215, 0, 0.65));
  }
  70% {
    transform: rotateY(630deg) scale(1.05);
    filter: brightness(1.2) drop-shadow(0 8px 20px rgba(255, 215, 0, 0.6));
  }
  75% {
    transform: rotateY(675deg) scale(1.03);
    filter: brightness(1.15) drop-shadow(0 6px 16px rgba(255, 215, 0, 0.5));
  }
  80% {
    transform: rotateY(720deg) scale(1.02);
    filter: brightness(1.1) drop-shadow(0 5px 14px rgba(255, 215, 0, 0.45));
  }
  85% {
    transform: rotateY(765deg) scale(1.01);
    filter: brightness(1.05) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
  90% {
    transform: rotateY(810deg) scale(1.005);
    filter: brightness(1.02) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
  95% {
    transform: rotateY(855deg) scale(1.002);
    filter: brightness(1.01) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
  100% {
    transform: rotateY(1080deg) scale(1);
    filter: brightness(1) drop-shadow(0 4px 12px rgba(255, 215, 0, 0.4));
  }
}

@keyframes coin-spin-smooth {
  0% {
    transform: rotateY(0deg);
  }
  100% {
    transform: rotateY(360deg);
  }
}

/* 3D Coin Container - GPU optimized for performance */
.coin-3d {
  transform-style: preserve-3d;
  perspective: 1200px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  will-change: transform; /* GPU acceleration hint */
}

.coin-container {
  transform-style: preserve-3d;
  transition: transform 0.2s ease-out;
  will-change: transform; /* GPU acceleration hint */
  position: relative;
  width: 64px;
  height: 64px;
  contain: layout style paint; /* Performance optimization */
}

/* Enhanced coin sides for proper image display and GPU optimization */
.coin-side {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid hsl(var(--border) / 0.4);
  box-shadow: 
    0 4px 16px rgba(255, 215, 0, 0.2),
    inset 0 2px 8px rgba(255, 255, 255, 0.1),
    inset 0 -1px 4px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  will-change: transform; /* GPU acceleration */
  contain: layout style paint; /* Performance optimization */
}

/* Coin side styling for proper image display */
.coin-heads {
  transform: rotateY(0deg);
}

.coin-tails {
  transform: rotateY(180deg);
}

/* Enhanced image styling within coin sides for performance */
.coin-side img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
  pointer-events: none;
  will-change: auto; /* Let browser decide GPU acceleration for images */
}

/* Animation states - Updated for realistic flip */
.coin-spinning {
  animation: coin-spin-smooth 0.4s linear infinite;
}

.coin-flipping.heads-result {
  animation: coin-flip-contained-heads 3.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

.coin-flipping.tails-result {
  animation: coin-flip-contained-tails 3.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

/* Enhanced RGB Lightning Border for coins */
.coin-rgb-border {
  position: relative;
}

.coin-rgb-border::before {
  content: '';
  position: absolute;
  inset: -3px;
  border-radius: 50%;
  background: conic-gradient(
    from 0deg, 
    hsl(0 100% 60%) 0%, 
    hsl(60 100% 60%) 16.66%, 
    hsl(120 100% 60%) 33.33%, 
    hsl(180 100% 60%) 50%, 
    hsl(240 100% 60%) 66.66%, 
    hsl(300 100% 60%) 83.33%, 
    hsl(360 100% 60%) 100%
  );
  mask: radial-gradient(circle at center, transparent 47%, black 50%);
  -webkit-mask: radial-gradient(circle at center, transparent 47%, black 50%);
  animation: rgb-cycle-optimized 3s linear infinite;
  will-change: transform;
  z-index: -1;
  opacity: 0.9;
}

/* Enhanced RGB cycle animation */
@keyframes rgb-cycle-optimized {
  0% {
    transform: rotate(0deg) scale(1);
    filter: brightness(1);
  }
  25% {
    transform: rotate(90deg) scale(1.05);
    filter: brightness(1.2);
  }
  50% {
    transform: rotate(180deg) scale(1.1);
    filter: brightness(1.4);
  }
  75% {
    transform: rotate(270deg) scale(1.05);
    filter: brightness(1.2);
  }
  100% {
    transform: rotate(360deg) scale(1);
    filter: brightness(1);
  }
}